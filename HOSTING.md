# Инструкции по развертыванию на хостинге

## Подготовка к развертыванию

### 1. Необходимые файлы
Убедитесь, что у вас есть все файлы:
```
├── run.py                 # Основной файл запуска
├── run_admin.py           # Файл запуска админской панели
├── bot_polling.py         # Основной бот
├── admin_polling.py       # Админская панель
├── config.py              # Конфигурация
├── database.py            # База данных
├── openai_client.py       # OpenAI интеграция
├── requirements.txt       # Зависимости
├── deploy.sh             # Скрипт развертывания
└── README.md             # Документация
```

### 2. Переменные окружения
На хостинге установите следующие переменные окружения:

```bash
BOT_TOKEN=ваш_telegram_токен
OPENAI_API_KEY=ваш_openai_ключ
```

## Развертывание

### Способ 1: Автоматический (рекомендуется)
```bash
# Загрузите файлы на хостинг
# Установите переменные окружения
# Запустите скрипт развертывания
./deploy.sh
```

### Способ 2: Ручной
```bash
# 1. Установите зависимости
pip3 install -r requirements.txt

# 2. Запустите основной бот
python3 run.py

# 3. В отдельном терминале запустите админскую панель
python3 run_admin.py
```

## Мониторинг

### Проверка работы бота
```bash
# Проверьте логи
tail -f bot.log

# Проверьте процессы
ps aux | grep python3
```

### Перезапуск бота
```bash
# Остановите текущий процесс
pkill -f run.py

# Запустите заново
python3 run.py
```

## Устранение неполадок

### Проблема: Бот не отвечает
1. Проверьте логи на ошибки
2. Убедитесь, что переменные окружения установлены
3. Проверьте доступность OpenAI API

### Проблема: Ошибки с OpenAI
1. Проверьте правильность API ключа
2. Убедитесь, что у вас есть доступ к GPT-4o
3. Проверьте баланс на аккаунте OpenAI

### Проблема: База данных не работает
1. Убедитесь, что файл `database.json` создан
2. Проверьте права доступа к файлу
3. Убедитесь, что директория доступна для записи

## Безопасность

- Никогда не коммитьте `.env` файл в git
- Используйте сильные пароли для API ключей
- Регулярно обновляйте зависимости
- Мониторьте логи на подозрительную активность

## Производительность

- Бот использует polling, что может быть медленнее webhook
- Для больших нагрузок рассмотрите использование webhook
- Регулярно очищайте старые данные из базы 